{"version":3,"sources":["../../src/pages/device/device.module.ts","../../src/pages/device/device.ts","../../node_modules/rxjs/add/observable/fromPromise.js","../../node_modules/rxjs/add/observable/zip.js","../../node_modules/rxjs/observable/zip.js","../../node_modules/rxjs/operators/zip.js"],"names":[],"mappings":"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CA;AACA;AACA;AACA,uC;;;;;;;;ACJA;AACA;AACA;AACA;AACA,+B;;;;;;;;ACJA;AACA;AACA;AACA,+B;;;;;;;;ACHA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,mBAAmB;AAChF;AACA;AACA;AACA,OAAO;AACP,OAAO;AACP,OAAO;AACP;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,gCAAgC,8BAA8B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,+BAA+B,IAAI;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+B","file":"1.js","sourcesContent":["import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DevicePage } from './device';\n//import { TerminalPage } from '../terminal/terminal';\n\n@NgModule({\n  declarations: [\n    DevicePage\n  ],\n  imports: [\n    IonicPageModule.forChild( DevicePage ),\n  ],\n  exports: [\n    DevicePage,\n  ],\n  //entryComponents: [\n  //  TerminalPage,\n  //],\n  // for the obscure ion-textbox\n  //schemas: [ CUSTOM_ELEMENTS_SCHEMA ]\n\n})\nexport class DevicePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/device/device.module.ts","import { Component, NgZone } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\nimport { TextEncoder } from 'text-encoding';\n\nimport { TerminalPage } from '../terminal/terminal';\nimport { Settings } from '../../providers/providers';\n\n// native Bluetooth\nimport { BLE } from '@ionic-native/ble';\nimport { Observable } from 'rxjs/Observable';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\n\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/filter';\nimport 'rxjs/add/operator/mergeMap';\nimport 'rxjs/add/operator/publish';\nimport 'rxjs/add/observable/from';\nimport 'rxjs/add/observable/fromPromise';\nimport 'rxjs/add/observable/zip';\nimport 'rxjs/add/operator/share';\n\n\n// service and characteristics numbers (native)\nimport { UART_SERVICE_STR, UART_TXRX_STR, UART_PASSWORD_STR, UART_CONFIG_STR } from '../../providers/ble/consts';\n\n@IonicPage()\n@Component({\n    selector: 'page-device',\n    templateUrl: 'device.html',\n})\nexport class DevicePage {\n\n    isScanning:boolean = false;\n    // status message on the bottom of screen\n    statusMessage: string;\n\n    // unfiltered list of devices\n    devices = [];\n    private scanId : Date;\n    // filtered and sorted list of devices\n    peripherals = [];\n    // the connected peripheral\n    peripheral: any = {};\n\n    private writableSubject = new BehaviorSubject<boolean>(false);\n    writable$:          Observable< boolean >;\n\n\n    constructor(\n        private ble: BLE,\n        private zone: NgZone,\n        public navCtrl: NavController,\n        private alertCtrl: AlertController,\n        public settings: Settings,\n    ) {\n        console.log( \"device page\");\n\n        this.writable$ = this.writableSubject.asObservable();\n\n        // bind the this-context in the constructor\n        // allowing external calls from\n        this.sendText = this.sendText.bind(this);\n\n    }\n\n    ionViewDidLoad() {\n        console.log('ionViewDidLoad DevicePage');\n    }\n\n\n////////////////////////////// N A T I V E    B L U E T O O T H    F U N C T I O N S\n\n\n    // button press, start scanning\n    public nativeScan() {\n\n        console.log(\"looking for services \" + UART_SERVICE_STR );\n\n        this.scanId = new Date();\n        this.devices.length = 0;\n        this.isScanning = true;\n\n        // native BLE works with strings, in stead of numbers\n        // MED_SERVICE_UUID = \"55feb600-0030-11e7-93ae-92361f002671\";\n        // var service = MED_SERVICE_UUID.replace(/-/g, ''); // find all '-' and change to ''\n        // services:[service]\n        // also string \"1815\" works\n\n        this.ble.startScanWithOptions([ UART_SERVICE_STR ], {reportDuplicates: true})\n            .subscribe(\n                device => this.deviceDetected( device ),\n                error => this.scanError( error),\n                () => console.log(\"stopped scanning\")\n            );\n\n        // stop after 10 seconds\n        setTimeout( () => this.nativeStopScan(), 10000 );\n    }\n\n\n    nativeStopScan() {\n        this.ble.stopScan().then(() => {\n            this.isScanning = false;\n        });\n        this.removeAbsentDevices();\n    }\n\n\n    private removeAbsentDevices(){\n        this.peripherals.filter( d => d.scanId !== this.scanId )\n            .map( d => this.removeAbsentDevice( d ));\n        this.peripherals = this.peripherals.filter( d => d.scanId === this.scanId );\n    }\n\n\n    private removeAbsentDevice( device ){\n        console.log( \"removed \"+JSON.stringify( device ));\n    }\n\n\n    // permission maybe\n    scanError( error ) {\n        this.setStatus('Error ' + error);\n        let alert = this.alertCtrl.create({\n            title: 'Scanning: ' + error,\n            buttons: [\"OK\"]\n        });\n        alert.present();\n    }\n\n\n\n    public deviceDetected( device ) {\n\n        if (device.name !== undefined) {\n            console.log( \"detected \"+device.name );\n\n            if( this.deviceAlreadySeen( device )) {\n                // add te.deviceAlreadySeen( device )) {\n                // add to filtered list\n                console.log(\"filtered \" + JSON.stringify(device, null, 2));\n                this.updateExistingDevice( device );\n            } else {\n                // just add to list\n                console.log(\"added \" + JSON.stringify(device, null, 2));\n                this.devices.push( device );\n            }\n        }\n    }\n\n\n    public deviceAlreadySeen( device ){\n        let d = this.devices.find( d => d.name === device.name );\n        return d !== undefined;\n    }\n\n\n    public updateExistingDevice( newDevice ){\n        let deviceIndex = -1;\n        // add to filtered list if not there yet\n        if( this.peripherals.find( d => d.name === newDevice.name ) === undefined ){\n            // push returns length\n            deviceIndex = this.peripherals.push( newDevice ) -1;\n\n        } else {\n            // get index and update the details\n            deviceIndex = this.peripherals.findIndex(d => d.id === newDevice.id);\n            let oldDevice = this.devices[ deviceIndex ];\n\n            // overwrite with new device information\n            newDevice.movement = this.compareRSSI( newDevice, oldDevice );\n            this.peripherals[ deviceIndex ] = newDevice;\n        }\n        // sort list by RSSI and keep display updated\n        this.zone.run(() => {\n            this.peripherals.sort((a, b) => {\n                return this.compareRSSI(a, b) ? 0 : 1;\n            })\n        });\n\n    }\n\n    private compareRSSI( oldDevice, newDevice ) : boolean {\n        let oldRssi = this.getRssiAsAbsInt( oldDevice );\n        let newRssi = this.getRssiAsAbsInt( newDevice );\n        return oldRssi < newRssi;\n    }\n\n    private getRssiAsAbsInt( device ){\n        return Math.abs(parseInt( device.rssi ));\n    }\n\n\n\n\n    // redirect to terminal page\n    async redirectToTerminalPage(device) {\n\n        this.nativeStopScan();\n        // connect to the device\n        this.setStatus('Connecting to ' + device.name || device.id);\n\n        return this.ble.connect( device.id ).subscribe(\n            peripheral => this.onConnected( peripheral ),\n            peripheral => this.onDeviceDisconnected( peripheral )\n        );\n    }\n\n\n    async onConnected( peripheral ) {\n        let _pwd = \"\";\n\n        this.zone.run(() => {\n            this.setStatus(\"Password\");\n            this.peripheral = peripheral;\n        });\n        // send password\n        await this.settings.getValue( 'password' ).then(\n            data => _pwd = data\n        );\n        await this.password( _pwd );\n\n        // now allow write to UART\n        setTimeout(() => this.writableSubject.next( true ), 0);\n\n        //await this.sendText( this.peripheral.id, \"\\0\");\n        //await this.sendText( this.peripheral.id, \"hallo from ios\\n\");\n        //await this.sendText( this.peripheral.id, \"second string\\n\");\n\n        // start notifications\n        this.peripheral.data = this.ble.startNotification( this.peripheral.id, UART_SERVICE_STR, UART_TXRX_STR )\n            .map( buffer => String.fromCharCode.apply( null, new Uint8Array( buffer )))\n            .share();\n\n        console.log( \"notify config\");\n        // not subscribed yet\n\n        //await this.sendText( this.peripheral.id, \"third text\\n\");\n\n        console.log( \"goto TermPage \"+ peripheral.name );\n        // move to the terminal page, if all is authorized\n        this.navCtrl.push( 'TerminalPage', {\n            peripheral: this.peripheral\n        })\n    }\n\n    private encodeCommand(cmd: string) {\n        const encoded = new TextEncoder('utf-8').encode(`${cmd}`);\n        //encoded[0] = encoded.length - 1;\n        return encoded;\n    }\n\n    async password( pw: string ){\n        console.log( \"writing passwd \"+ pw);\n        return this.ble.write( this.peripheral.id, UART_SERVICE_STR, UART_PASSWORD_STR, this.encodeCommand( pw ).buffer ).then(\n            () => this.setStatus( \"password written\" ),\n            e => this.setStatus( \"password Error\" )\n        );\n    }\n\n\n    public sendText( text: string ) {\n\n        console.log(\"native send \" + text);\n\n        const bytes = text.split('').map(c => c.charCodeAt(0));\n        const chunks = [];\n\n        while (bytes.length > 0) {\n            chunks.push(new Uint8Array(bytes.splice(0, 20)));\n        }\n\n        const result = Observable.zip(\n                Observable.from(chunks),\n                this.writableSubject.filter(value => value)\n            )\n            .mergeMap(([ chunk, writeable ]) => {\n                //console.log(\"writing: \" + chunk);\n                this.writableSubject.next(false);\n                // this.ble.writeWithoutResponse is a promise\n                return Observable.fromPromise(\n                    this.ble.writeWithoutResponse( this.peripheral.id, UART_SERVICE_STR, UART_TXRX_STR, chunk.buffer )\n                )\n            })\n            // timeout absolutely necessary because otherwise writeValue$ will fail when called too quickly\n            .map(() => setTimeout(() => this.writableSubject.next(true), 10))\n            // make this into a connectable Observable\n            .publish();\n\n        // connect to the Observable and get the result\n        result.connect();\n        return result;\n\n    }\n\n\n    public onDeviceDisconnected( peripheral ) {\n        let alert = this.alertCtrl.create({\n            title: \"The peripheral disconnected\",\n            buttons: [\"OK\"]\n        });\n        alert.present();\n        this.navCtrl.push( 'DevicePage' );\n    }\n\n\n\n    // status message on footer\n    setStatus(message) {\n        console.log(message);\n        this.zone.run(() => {\n            this.statusMessage = message;\n        });\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/device/device.ts","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar fromPromise_1 = require('../../observable/fromPromise');\nObservable_1.Observable.fromPromise = fromPromise_1.fromPromise;\n//# sourceMappingURL=fromPromise.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/add/observable/fromPromise.js\n// module id = 375\n// module chunks = 0 1","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar zip_1 = require('../../observable/zip');\nObservable_1.Observable.zip = zip_1.zip;\n//# sourceMappingURL=zip.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/add/observable/zip.js\n// module id = 376\n// module chunks = 0 1","\"use strict\";\nvar zip_1 = require('../operators/zip');\nexports.zip = zip_1.zipStatic;\n//# sourceMappingURL=zip.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/observable/zip.js\n// module id = 377\n// module chunks = 0 1","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar ArrayObservable_1 = require('../observable/ArrayObservable');\nvar isArray_1 = require('../util/isArray');\nvar Subscriber_1 = require('../Subscriber');\nvar OuterSubscriber_1 = require('../OuterSubscriber');\nvar subscribeToResult_1 = require('../util/subscribeToResult');\nvar iterator_1 = require('../symbol/iterator');\n/* tslint:enable:max-line-length */\n/**\n * @param observables\n * @return {Observable<R>}\n * @method zip\n * @owner Observable\n */\nfunction zip() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i - 0] = arguments[_i];\n    }\n    return function zipOperatorFunction(source) {\n        return source.lift.call(zipStatic.apply(void 0, [source].concat(observables)));\n    };\n}\nexports.zip = zip;\n/* tslint:enable:max-line-length */\n/**\n * Combines multiple Observables to create an Observable whose values are calculated from the values, in order, of each\n * of its input Observables.\n *\n * If the latest parameter is a function, this function is used to compute the created value from the input values.\n * Otherwise, an array of the input values is returned.\n *\n * @example <caption>Combine age and name from different sources</caption>\n *\n * let age$ = Observable.of<number>(27, 25, 29);\n * let name$ = Observable.of<string>('Foo', 'Bar', 'Beer');\n * let isDev$ = Observable.of<boolean>(true, true, false);\n *\n * Observable\n *     .zip(age$,\n *          name$,\n *          isDev$,\n *          (age: number, name: string, isDev: boolean) => ({ age, name, isDev }))\n *     .subscribe(x => console.log(x));\n *\n * // outputs\n * // { age: 27, name: 'Foo', isDev: true }\n * // { age: 25, name: 'Bar', isDev: true }\n * // { age: 29, name: 'Beer', isDev: false }\n *\n * @param observables\n * @return {Observable<R>}\n * @static true\n * @name zip\n * @owner Observable\n */\nfunction zipStatic() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i - 0] = arguments[_i];\n    }\n    var project = observables[observables.length - 1];\n    if (typeof project === 'function') {\n        observables.pop();\n    }\n    return new ArrayObservable_1.ArrayObservable(observables).lift(new ZipOperator(project));\n}\nexports.zipStatic = zipStatic;\nvar ZipOperator = (function () {\n    function ZipOperator(project) {\n        this.project = project;\n    }\n    ZipOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ZipSubscriber(subscriber, this.project));\n    };\n    return ZipOperator;\n}());\nexports.ZipOperator = ZipOperator;\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ZipSubscriber = (function (_super) {\n    __extends(ZipSubscriber, _super);\n    function ZipSubscriber(destination, project, values) {\n        if (values === void 0) { values = Object.create(null); }\n        _super.call(this, destination);\n        this.iterators = [];\n        this.active = 0;\n        this.project = (typeof project === 'function') ? project : null;\n        this.values = values;\n    }\n    ZipSubscriber.prototype._next = function (value) {\n        var iterators = this.iterators;\n        if (isArray_1.isArray(value)) {\n            iterators.push(new StaticArrayIterator(value));\n        }\n        else if (typeof value[iterator_1.iterator] === 'function') {\n            iterators.push(new StaticIterator(value[iterator_1.iterator]()));\n        }\n        else {\n            iterators.push(new ZipBufferIterator(this.destination, this, value));\n        }\n    };\n    ZipSubscriber.prototype._complete = function () {\n        var iterators = this.iterators;\n        var len = iterators.length;\n        if (len === 0) {\n            this.destination.complete();\n            return;\n        }\n        this.active = len;\n        for (var i = 0; i < len; i++) {\n            var iterator = iterators[i];\n            if (iterator.stillUnsubscribed) {\n                this.add(iterator.subscribe(iterator, i));\n            }\n            else {\n                this.active--; // not an observable\n            }\n        }\n    };\n    ZipSubscriber.prototype.notifyInactive = function () {\n        this.active--;\n        if (this.active === 0) {\n            this.destination.complete();\n        }\n    };\n    ZipSubscriber.prototype.checkIterators = function () {\n        var iterators = this.iterators;\n        var len = iterators.length;\n        var destination = this.destination;\n        // abort if not all of them have values\n        for (var i = 0; i < len; i++) {\n            var iterator = iterators[i];\n            if (typeof iterator.hasValue === 'function' && !iterator.hasValue()) {\n                return;\n            }\n        }\n        var shouldComplete = false;\n        var args = [];\n        for (var i = 0; i < len; i++) {\n            var iterator = iterators[i];\n            var result = iterator.next();\n            // check to see if it's completed now that you've gotten\n            // the next value.\n            if (iterator.hasCompleted()) {\n                shouldComplete = true;\n            }\n            if (result.done) {\n                destination.complete();\n                return;\n            }\n            args.push(result.value);\n        }\n        if (this.project) {\n            this._tryProject(args);\n        }\n        else {\n            destination.next(args);\n        }\n        if (shouldComplete) {\n            destination.complete();\n        }\n    };\n    ZipSubscriber.prototype._tryProject = function (args) {\n        var result;\n        try {\n            result = this.project.apply(this, args);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return ZipSubscriber;\n}(Subscriber_1.Subscriber));\nexports.ZipSubscriber = ZipSubscriber;\nvar StaticIterator = (function () {\n    function StaticIterator(iterator) {\n        this.iterator = iterator;\n        this.nextResult = iterator.next();\n    }\n    StaticIterator.prototype.hasValue = function () {\n        return true;\n    };\n    StaticIterator.prototype.next = function () {\n        var result = this.nextResult;\n        this.nextResult = this.iterator.next();\n        return result;\n    };\n    StaticIterator.prototype.hasCompleted = function () {\n        var nextResult = this.nextResult;\n        return nextResult && nextResult.done;\n    };\n    return StaticIterator;\n}());\nvar StaticArrayIterator = (function () {\n    function StaticArrayIterator(array) {\n        this.array = array;\n        this.index = 0;\n        this.length = 0;\n        this.length = array.length;\n    }\n    StaticArrayIterator.prototype[iterator_1.iterator] = function () {\n        return this;\n    };\n    StaticArrayIterator.prototype.next = function (value) {\n        var i = this.index++;\n        var array = this.array;\n        return i < this.length ? { value: array[i], done: false } : { value: null, done: true };\n    };\n    StaticArrayIterator.prototype.hasValue = function () {\n        return this.array.length > this.index;\n    };\n    StaticArrayIterator.prototype.hasCompleted = function () {\n        return this.array.length === this.index;\n    };\n    return StaticArrayIterator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ZipBufferIterator = (function (_super) {\n    __extends(ZipBufferIterator, _super);\n    function ZipBufferIterator(destination, parent, observable) {\n        _super.call(this, destination);\n        this.parent = parent;\n        this.observable = observable;\n        this.stillUnsubscribed = true;\n        this.buffer = [];\n        this.isComplete = false;\n    }\n    ZipBufferIterator.prototype[iterator_1.iterator] = function () {\n        return this;\n    };\n    // NOTE: there is actually a name collision here with Subscriber.next and Iterator.next\n    //    this is legit because `next()` will never be called by a subscription in this case.\n    ZipBufferIterator.prototype.next = function () {\n        var buffer = this.buffer;\n        if (buffer.length === 0 && this.isComplete) {\n            return { value: null, done: true };\n        }\n        else {\n            return { value: buffer.shift(), done: false };\n        }\n    };\n    ZipBufferIterator.prototype.hasValue = function () {\n        return this.buffer.length > 0;\n    };\n    ZipBufferIterator.prototype.hasCompleted = function () {\n        return this.buffer.length === 0 && this.isComplete;\n    };\n    ZipBufferIterator.prototype.notifyComplete = function () {\n        if (this.buffer.length > 0) {\n            this.isComplete = true;\n            this.parent.notifyInactive();\n        }\n        else {\n            this.destination.complete();\n        }\n    };\n    ZipBufferIterator.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.buffer.push(innerValue);\n        this.parent.checkIterators();\n    };\n    ZipBufferIterator.prototype.subscribe = function (value, index) {\n        return subscribeToResult_1.subscribeToResult(this, this.observable, this, index);\n    };\n    return ZipBufferIterator;\n}(OuterSubscriber_1.OuterSubscriber));\n//# sourceMappingURL=zip.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/operators/zip.js\n// module id = 378\n// module chunks = 0 1"],"sourceRoot":""}